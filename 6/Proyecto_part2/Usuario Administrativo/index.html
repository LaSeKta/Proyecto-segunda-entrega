<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/css/estilos_p1.css">
    <link rel="stylesheet" href="assets/css/media_p1.css">
    <link rel="icon" href="assets/img/Logos/Logo_home.png">
    <title>S.I.G.EN</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/estilos_p1.css">
</head>

<body>
    <div class="contA">
        <nav>
            <div class="imagen_logo"> 
                <img src="assets/img/Logos/Logo_home.png" width="120em" height="120em" alt="imagen" class="container-logo">
            </div>
        
            <div class="div-nav-1">
                <h1>S.I.G.EN</h1>
            </div>
            <div class="div-nav-2">
                <ul>
                    <li class="op-menu"><a id="clic1" href="#home" class="activo">Home</a></li>
                    <li class="op-menu"><a href="#Horarios">Calendario</a></li>
                    <li class="op-menu"><a href="#Gimnasios">Pagos y Cuotas</a></li>
                    <li class="op-menu"><a href="#Sobre nosotros">Control de Asistencia</a></li>
                </ul>

                <div class="menu-icon" id="menuIcon">☰
                    <div class="menu-hidden" id="menuHidden">
                        <li class="oc-menu"><a href="#home">Home</a></li>
                        <li class="oc-menu"><a href="#Gimnasios">Pagos y Cuotas</a></li>
                        <li class="oc-menu"><a href="#Sobre nosotros">Control de Asistencia</a></li>
                        <li class="oc-menu"><a href="#Horarios">Calendario</a></li>
                    </div>
        </nav>
        <header id="home">

            <article class="izq-header" id="subir">
                <div class="">
                    <div id="EfectoCarrusel" class="carousel slide">

                        <!-- Indicadores-->
                        <ul class="carousel-indicators">
                            <li class="item1 active"></li>
                            <li class="item2"></li>
                            <li class="item3"></li>
                        </ul>

                        <!-- Desplazamineto de imágenes -->
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <a href="#Horarios">
                                <img src="assets/img/img1.png" alt="Interior design 1">
                                </a>
                            </div>
                            <div class="carousel-item">
                                <a href="#Gimnasios">
                                <img src="assets/img/img2.png" alt="Interior design 2">
                                </a>
                            </div>
                            <div class="carousel-item">
                                <a href="#Sobre nosotros">
                                <img src="assets/img/img3.png" alt="Interior design 3">
                                </a>
                            </div>
                        </div>

                        <!-- Controles de navegación como flechas -->
                        <a class="carousel-control-prev" href="#EfectoCarrusel">
                            <span class="carousel-control-prev-icon"></span>
                        </a>
                        <a class="carousel-control-next" href="#EfectoCarrusel">
                            <span class="carousel-control-next-icon"></span>
                        </a>
                    </div>

            </article>
            <article class="der-header">

                <div class="texto">
                    <h2><br>S.I.G.EN</h2>
                    <p class="parrafo1"> <br> Usuario administrativo incluye "Calendario" para la gestión de sesiones, <br> "Pagos y Cuotas" para registrar y verificar pagos, "Control de Asistencia" para visualizar la asistencia de los clientes y  alertas relacionadas:<br>
                        · Gestionar agenda <br>
                        · Gestión de cuotas <br>
                        · Control de asistencia <br>
                        El Usuario Administrativo en la plataforma S.I.G.EN es responsable de gestionar la operativa diaria del gimnasio.
                    </p>
                    
                </div>
                
            </article>
        </header>


        <section id="Horarios">
            <div class="section-title">
                <h3>Calendario</h3>
            </div>
            <div class="calendar-container">
                <div id="calendar"></div>
            </div>
        </section>
        
        <div class="modal fade" id="sessionModal" tabindex="-1" role="dialog" aria-labelledby="sessionModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="sessionModalLabel">Gestionar Sesión</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form id="sessionForm">
                            <input type="hidden" id="eventId">
                            <div class="form-group">
                                <label for="sessionTitle">Título de la Sesión</label>
                                <input type="text" class="form-control" id="sessionTitle" placeholder="Ej. Musculación - Pectoral">
                            </div>
                            <div class="form-group">
                                <label for="sessionDescription">Descripción</label>
                                <textarea class="form-control" id="sessionDescription" placeholder="Ej. Pectoral, Hombro y Tríceps"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="sessionDate">Fecha</label>
                                <input type="text" class="form-control" id="sessionDate" readonly>
                            </div>
                            <div class="form-group">
                                <label for="trainerSelect">Asignar Entrenador</label>
                                <select class="form-control" id="trainerSelect">
                                    <!-- Opciones de entrenadores, deben ser llenadas dinámicamente -->
                                    <option value="1">Entrenador A</option>
                                    <option value="2">Entrenador B</option>
                                    <option value="3">Entrenador C</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary">Guardar Sesión</button>
                            <button type="button" id="deleteSession" class="btn btn-danger" style="display: none;">Eliminar Sesión</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="messageDiv"></div> <!-- Div para mostrar mensajes -->
        
        
        <section id="Gimnasios">
            <div class="section-title">
                <h3>Pagos y Cuotas</h3>
                <p class="parrafo2">Administra tus pagos y cuotas fácilmente con nuestras herramientas. Registra y verifica pagos, genera facturas,<br> y realiza un seguimiento de las cuotas vencidas o próximas a vencer para mantener todo al día.</p>
            </div>
            
            <div class="container">
                <!-- Registrar Pagos -->
                <div class="item-container">
                    <h4>Registrar Pagos</h4>
                    <div class="paragraphs-and-button">
                        <p class="parrafo3">Registra tus pagos de manera rápida y sencilla. Mantén un registro actualizado de todas tus transacciones.</p>
                        <a class="boton2" href="#FormularioRegistroPagos">Registrar Pago</a>
                    </div>
                </div>
                
                <!-- Generar Facturas -->
                <div class="item-container">
                    <h4>Generar Facturas</h4>
                    <div class="paragraphs-and-button">
                        <p class="parrafo3">Genera y descarga facturas para tus pagos realizados. Permite mantener un registro detallado de tus transacciones financieras.</p>
                        <a class="boton2" href="#GenerarFacturas">Generar Factura</a>
                    </div>
                </div>
        
                <!-- Seguimiento de Cuotas -->
                <div class="item-container">
                    <h4>Seguimiento de <br>Cuotas</h4>
                    <div class="paragraphs-and-button">
                        <p class="parrafo33">Consulta el estado de tus cuotas, verifica las vencidas o próximas a vencer, y mantén un control claro de tus pagos pendientes.</p>
                        <a class="boton23" href="#SeguimientoCuotas">Ver Cuotas</a>
                    </div>
                </div>
                
                <!-- Verificar Pagos -->
                <div class="item-container">
                    <h4>Verificar Pagos</h4>
                    <div class="paragraphs-and-button">
                        <p class="parrafo3">Verifica los pagos realizados. Puedes revisar el historial de pagos y obtener detalles d  e cada transacción.</p>
                        <a class="boton2" href="#VerificarPagos">Verificar Pago</a>
                    </div>
                </div>
            </div>
        </section>
        
        


        <section id="Sobre nosotros">
            <h2 class="tituloo">Control de Asistencia</h2>
            <div id="asistencia-control">
                <table id="tabla-asistencia">
                    <thead>
                        <tr>
                            <th>Nombre del Cliente</th>
                            <th>Asistencias</th>
                            <th>Ausencias</th>
                            <th>Alertas</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Filas de clientes se agregarán aquí dinámicamente -->
                    </tbody>
                </table>
            </div>
        </section>

        <script>// Datos de ejemplo de clientes y su asistencia
            const clientes = [
                { nombre: 'Juan Pérez', asistencias: 8, ausencias: 2 },
                { nombre: 'Ana Gómez', asistencias: 5, ausencias: 5 },
                { nombre: 'Carlos Ruiz', asistencias: 9, ausencias: 1 },
            ];
            
            // Función para verificar la asistencia y generar alertas
            function verificarAsistencia() {
                const tbody = document.querySelector('#tabla-asistencia tbody');
                tbody.innerHTML = ''; // Limpiar la tabla antes de añadir nuevas filas
            
                clientes.forEach(cliente => {
                    const tr = document.createElement('tr');
                    
                    // Columna Nombre del Cliente
                    const tdNombre = document.createElement('td');
                    tdNombre.textContent = cliente.nombre;
                    tr.appendChild(tdNombre);
            
                    // Columna Asistencias
                    const tdAsistencias = document.createElement('td');
                    tdAsistencias.textContent = cliente.asistencias;
                    tr.appendChild(tdAsistencias);
            
                    // Columna Ausencias
                    const tdAusencias = document.createElement('td');
                    tdAusencias.textContent = cliente.ausencias;
                    tr.appendChild(tdAusencias);
            
                    // Columna Alertas
                    const tdAlerta = document.createElement('td');
                    if (cliente.ausencias > 3) {
                        tdAlerta.textContent = '¡Alerta: Ausencias Recurrentes!';
                        tdAlerta.style.color = 'red';
                    } else {
                        tdAlerta.textContent = 'Asistencia Regular';
                    }
                    tr.appendChild(tdAlerta);
            
                    tbody.appendChild(tr);
                });
            }
            
            // Llamar a la función para cargar la tabla de asistencia al cargar la página
            document.addEventListener('DOMContentLoaded', verificarAsistencia);
            </script>





        <script>
            document.addEventListener('DOMContentLoaded', function() {
                var calendarEl = document.getElementById('calendar');
                var messageDiv = document.getElementById('messageDiv');
                var currentEvent = null; // Variable para almacenar el evento actual
        
                var trainers = {
                    "1": [],
                    "2": [],
                    "3": []
                }; // Simulación de sesiones ocupadas por cada entrenador, para demo
        
                var calendar = new FullCalendar.Calendar(calendarEl, {
                    locale: 'es', // Configuración para idioma español
                    initialView: 'dayGridMonth',
                    headerToolbar: {
                        left: 'prev,next today',
                        center: 'title',
                        right: 'dayGridMonth,timeGridWeek,timeGridDay'
                    },
                    buttonText: {
                        today: 'Hoy',
                        month: 'Mes',
                        week: 'Semana',
                        day: 'Día',
                        list: 'Agenda'
                    },
                    editable: true,
                    selectable: true,
                    
                    dateClick: function(info) {
                        document.getElementById('sessionForm').reset();
                        document.getElementById('eventId').value = '';
                        $('#sessionDate').val(info.dateStr);
                        $('#deleteSession').hide(); // Ocultar el botón de eliminar en modo de creación
                        $('#sessionModal').modal('show');
                        currentEvent = null;
                    },
                    eventClick: function(info) {
                        currentEvent = info.event;
                        document.getElementById('eventId').value = info.event.id;
                        document.getElementById('sessionTitle').value = info.event.title;
                        document.getElementById('sessionDescription').value = info.event.extendedProps.description;
                        $('#sessionDate').val(info.event.startStr);
                        $('#trainerSelect').val(info.event.extendedProps.trainerId || ''); // Asignar el entrenador
                        $('#deleteSession').show(); // Mostrar el botón de eliminar en modo de edición
                        $('#sessionModal').modal('show');
                    }
                });
        
                calendar.render();
        
                // Manejar el envío del formulario
                document.getElementById('sessionForm').addEventListener('submit', function(e) {
                    e.preventDefault();
        
                    var title = document.getElementById('sessionTitle').value;
                    var description = document.getElementById('sessionDescription').value;
                    var date = document.getElementById('sessionDate').value;
                    var trainerId = document.getElementById('trainerSelect').value;
        
                    if (title) {
                        // Verificar disponibilidad del entrenador
                        if (trainers[trainerId].includes(date)) {
                            showMessage('El entrenador no está disponible en esta fecha.');
                            return;
                        }
        
                        if (currentEvent) {
                            // Editar evento existente
                            currentEvent.setProp('title', title);
                            currentEvent.setStart(date);
                            currentEvent.setExtendedProp('description', description);
                            currentEvent.setExtendedProp('trainerId', trainerId);
                            showMessage('Sesión actualizada correctamente.');
                        } else {
                            // Crear nuevo evento
                            var newEvent = calendar.addEvent({
                                title: title,
                                start: date,
                                description: description,
                                trainerId: trainerId
                            });
                            trainers[trainerId].push(date); // Registrar la fecha como ocupada para el entrenador
                            currentEvent = newEvent; // Establecer el evento creado como actual
                            showMessage('Sesión creada correctamente.');
                        }
        
                        $('#sessionModal').modal('hide');
                        document.getElementById('sessionForm').reset(); // Resetea el formulario después de agregar/editar la sesión
                    }
                });
        
                // Manejar la eliminación de eventos
                document.getElementById('deleteSession').addEventListener('click', function() {
                    if (currentEvent) {
                        var trainerId = currentEvent.extendedProps.trainerId;
                        var date = currentEvent.startStr;
        
                        // Eliminar la fecha de la lista de ocupadas para el entrenador
                        var index = trainers[trainerId].indexOf(date);
                        if (index > -1) {
                            trainers[trainerId].splice(index, 1);
                        }
        
                        currentEvent.remove();
                        showMessage('Sesión eliminada correctamente.');
                        $('#sessionModal').modal('hide');
                        document.getElementById('sessionForm').reset();
                        currentEvent = null; // Resetear el evento actual
                    }
                });
        
                function showMessage(message) {
                    messageDiv.innerHTML = '<div class="alert alert-info" role="alert">' + message + '</div>';
                    setTimeout(function() {
                        messageDiv.innerHTML = ''; // Limpiar mensaje después de 3 segundos
                    }, 3000);
                }
            });
        </script>
        
        
        <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
        <script src="assets/js/script.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js"></script>
    </div>


</html>
